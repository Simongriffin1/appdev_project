# Journaling App

A Rails 8 web application for personal journaling with AI-generated prompts and automatic entry analysis.

## Features

- User authentication (sign up, sign in, sign out)
- AI-generated journaling prompts based on your recent entries
- Create and manage journal entries
- Automatic AI analysis of entries (summary, sentiment, emotion, topics)
- Browse entries by topic
- Clean, simple interface

## Local Development

### Prerequisites

- Ruby 3.0 or higher
- PostgreSQL
- Bundler

### Setup

1. Install dependencies:
   ```bash
   bundle install
   ```

2. Setup the database:
   ```bash
   bin/rails db:create
   bin/rails db:migrate
   ```

3. Configure environment variables:
   ```bash
   # Copy the example file
   cp .env.example .env
   
   # Edit .env and add your OpenAI API key
   # Get your key from: https://platform.openai.com/api-keys
   ```

4. Start the server:
   ```bash
   bin/rails server
   ```

5. Visit `http://localhost:3000`

### Environment Variables

The app uses environment variables for configuration. See `.env.example` for all available options.

**Required for AI features:**
- `OPENAI_API_KEY` - Your OpenAI API key (get from https://platform.openai.com/api-keys)

**Required for database:**
- `DATABASE_URL` - PostgreSQL connection string (format: `postgresql://user:pass@localhost/dbname`)

**Optional:**
- `RAILS_ENV` - Environment (default: development)
- `RAILS_MAX_THREADS` - Database connection pool size (default: 5)
- `PORT` - Server port (default: 3000)
- `WEB_CONCURRENCY` - Puma workers (default: 2)

The app works without `OPENAI_API_KEY` - it will use fallback prompts and basic analysis.

## Deployment

This app is configured for deployment on Render.

### Render Deployment

1. Connect your repository to Render
2. Create a new Web Service
3. Render will automatically detect the `render.yaml` configuration
4. Environment variables are configured in `render.yaml`:
   - `DATABASE_URL` - Automatically provided by Render
   - `SECRET_KEY_BASE` - Automatically generated by Render
   - `OPENAI_API_KEY` - Add in Render dashboard under Environment Variables
   - `RAILS_ENV` - Set to production
   - `WEB_CONCURRENCY` - Set to 2

5. To add `OPENAI_API_KEY` in Render:
   - Go to your service â†’ Environment
   - Add new environment variable: `OPENAI_API_KEY`
   - Enter your API key value
   - Save changes

The app uses:
- PostgreSQL (via `DATABASE_URL`)
- Puma web server
- Standard Rails 8 production configuration

## License

MIT License - see [LICENSE.txt](LICENSE.txt)

<div style="margin-bottom: 20px;">
  <p>Signed in as: <strong><%= current_user.email %></strong></p>
  <%= button_to "Sign out", sign_out_path, method: :delete, style: "display: inline-block; padding: 5px 10px;" %>
</div>

<h1>Dashboard</h1>

<section style="margin-bottom: 30px;">
  <h2>Current Prompt</h2>
  
  <% if @latest_prompt %>
    <div style="padding: 15px; border: 1px solid #ccc; margin-bottom: 15px;">
      <p style="font-size: 1.2em;"><%= @latest_prompt.body %></p>
    </div>
    <div style="margin-bottom: 15px;">
      <%= link_to "Answer this prompt", prompt_path(@latest_prompt), style: "display: inline-block; padding: 8px 15px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; margin-right: 10px;" %>
      <%= form_with url: generate_prompts_path, method: :post, style: "display: inline-block;" do |f| %>
        <%= f.submit "Generate new AI prompt", style: "padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;" %>
      <% end %>
    </div>
  <% else %>
    <p>No prompts yet.</p>
    <%= form_with url: generate_prompts_path, method: :post do |f| %>
      <%= f.submit "Generate new AI prompt", style: "padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;" %>
    <% end %>
  <% end %>
</section>

<section>
  <h2>Recent Entries</h2>
  
  <% if @recent_entries.any? %>
    <ul style="list-style: none; padding: 0;">
      <% @recent_entries.each do |entry| %>
        <li style="padding: 10px; margin-bottom: 10px; border: 1px solid #ddd;">
          <div>
            <strong><%= entry.created_at.to_date %></strong>
            <% if entry.prompt %>
              <div style="color: #666; font-style: italic;">
                Prompt: <%= entry.prompt.body.truncate(50) %>
              </div>
            <% end %>
          </div>
          <div style="margin: 5px 0;">
            <%= entry.body.truncate(100) %>
          </div>
          <div>
            <%= link_to "View", journal_entry_path(entry) %>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No entries yet.</p>
  <% end %>
</section>

<p style="margin-top: 20px;">
  <%= link_to "All Entries", journal_entries_path %> |
  <%= link_to "Topics", topics_path %>
</p>

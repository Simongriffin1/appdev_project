<h1 class="page-title">Journal entry</h1>

<div class="card">
  <div class="entry-meta">
    <%= @journal_entry.created_at.strftime("%b %-d, %Y at %l:%M %p") %>
  </div>

  <% if @journal_entry.prompt %>
    <p class="muted">
      In response to:
      "<%= @journal_entry.prompt.body %>"
    </p>
  <% end %>

  <h2 class="card__title">Your writing</h2>
  <p><%= simple_format(@journal_entry.body) %></p>
</div>

<% if @journal_entry.entry_analysis %>
  <div class="card" style="margin-top: 1rem;">
    <h2 class="card__title">AI reflection</h2>
    <p class="card__subtitle">
      Generated automatically from your entry.
    </p>

    <p><strong>Summary</strong></p>
    <p><%= @journal_entry.entry_analysis.summary %></p>

    <p style="margin-top: 0.5rem;">
      <strong>Sentiment:</strong> <%= @journal_entry.entry_analysis.sentiment.capitalize %><br>
      <strong>Emotion:</strong> <%= @journal_entry.entry_analysis.emotion.capitalize %>
    </p>

    <% if @journal_entry.topics.any? %>
      <p style="margin-top: 0.5rem;"><strong>Topics:</strong></p>
      <% @journal_entry.topics.each do |topic| %>
        <%= link_to topic.name, journal_entries_path(topic_id: topic.id), class: "badge" %>
      <% end %>
    <% end %>
  </div>
<% end %>

<div class="btn-row" style="margin-top: 1rem;">
  <%= link_to "Back to entries", journal_entries_path, class: "btn btn-ghost" %>
  <%= link_to "Dashboard", dashboard_path, class: "btn btn-ghost" %>
</div>

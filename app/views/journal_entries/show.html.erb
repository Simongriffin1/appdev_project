<h1>Journal Entry</h1>

<div style="margin-bottom: 20px;">
  <strong>Date:</strong> <%= @journal_entry.created_at.to_date %>
</div>

<% if @journal_entry.prompt %>
  <div style="padding: 15px; border: 1px solid #ccc; margin-bottom: 20px; background: #f0f0f0;">
    <strong>Prompt:</strong>
    <p style="margin: 5px 0 0 0;"><%= @journal_entry.prompt.body %></p>
  </div>
<% end %>

<div style="padding: 15px; border: 1px solid #ccc; margin-bottom: 20px;">
  <strong>Entry:</strong>
  <p style="white-space: pre-wrap; margin: 10px 0 0 0;"><%= @journal_entry.body %></p>
</div>

<% if @journal_entry.entry_analysis %>
  <div style="padding: 15px; border: 1px solid #ccc; margin-bottom: 20px; background: #e8f4f8;">
    <h2>AI Analysis</h2>
    
    <div style="margin-bottom: 10px;">
      <strong>Summary:</strong>
      <p style="margin: 5px 0;"><%= @journal_entry.entry_analysis.summary %></p>
    </div>
    
    <div style="margin-bottom: 10px;">
      <strong>Sentiment:</strong> <%= @journal_entry.entry_analysis.sentiment %>
    </div>
    
    <div style="margin-bottom: 10px;">
      <strong>Emotion:</strong> <%= @journal_entry.entry_analysis.emotion %>
    </div>
    
    <% if @journal_entry.topics.any? %>
      <div>
        <strong>Topics:</strong>
        <ul style="margin: 5px 0; padding-left: 20px;">
          <% @journal_entry.topics.each do |topic| %>
            <li><%= link_to topic.name, journal_entries_path(topic_id: topic.id) %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>
<% end %>

<p style="margin-top: 20px;">
  <%= link_to "Back to Entries", journal_entries_path %> |
  <%= link_to "Dashboard", dashboard_path %>
</p>
